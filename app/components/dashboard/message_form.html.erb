<%= form_with model: @message, url: "#", data: { motion: 'change->validate submit->save' } do |f| %>
  <div>
    <%= svg "reply-fill", width: "5em", height: "5em", class: form_status %>
  </div>

  <% unless hide_to_from %>
    <div class="mt-3 row">
      <%= svg "person-circle", class: "col-3", width: "5em", height: "5em" -%>
      <div class="form-group col">
        <%= f.label :to %>
        <%= f.collection_select :to_id, user_options, :id, :name,
                                { include_blank: true },
                                {
                                  class: "form-control #{valid_class(@touched, f.object, :to_id)}",
                                  required: true,
                                  data: { field: :to_id }
                                }
        %>
        <%= validation_messages f.object, :to_id %>
      </div>
    </div>

  <% end %>

  <div class="mt-3">
    <div class="form-group">
      <%= f.label :content, "Message" %>
      <%= f.text_area :content, required: true,
                                class: "form-control #{valid_class(@touched, f.object, :content)}",
                                data: { field: :content, motion: 'blur->validate' }
      %>
      <%= validation_messages f.object, :content %>

    </div>
  </div>

  <div class="form-group">
    <%= f.button class: "btn btn-primary #{"disabled" if disabled}" do %>
      <%= svg "cursor" %> Send
    <% end %>
    <% if show_disabled_msg %>
      <span class="ml-2">Please complete the message.</span>
    <% end %>
  </div>
<% end %>
